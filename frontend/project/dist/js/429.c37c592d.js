"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[429],{9429:function(e,a,t){t.r(a),t.d(a,{default:function(){return _}});t(4114),t(8111),t(2489),t(7588),t(1701);var c=t(6768),r=t(144),s=t(4232),o=t(1387),i=t(7477),l=t(1147);const n={class:"product-list"},d={class:"search-bar"},u={key:0,class:"loading-section"},p={class:"category-header"},m={class:"category-title"},g={key:0,class:"product-grid"},v=["onClick"],h={class:"image-container"},k={class:"product-info"},y={class:"name"},f={class:"desc"},C={class:"price-section"},L={class:"price"},w={key:1,class:"empty-products"};var b={__name:"ProductList",setup(e){const a=(0,o.rd)(),t=(0,r.KR)([]),b=(0,r.KR)(""),E=(0,r.KR)(!0),I=()=>{const e=localStorage.getItem("productCategories");return e?JSON.parse(e):[{id:"1005000",name:"居家"},{id:"1005002",name:"美食"},{id:"1010000",name:"服饰"},{id:"1011000",name:"母婴"},{id:"1013001",name:"个护"},{id:"1019000",name:"严选"},{id:"1043000",name:"数码"},{id:"109243029",name:"运动"},{id:"19999999",name:"杂项"}]},_=e=>e?.length>0?e[0]:"/placeholder-product.jpg",X=async e=>{try{const a=await l.A.get(`http://algorineko.top:8080/api/merchant/product/category/${e}`);return a.data.map((e=>({id:e.productId,name:e.productName,description:e.description,price:e.price,images:e.images,categoryId:String(e.categoryId)})))}catch(a){return console.error(`获取分类 ${e} 商品失败:`,a),[]}},F=async()=>{try{E.value=!0;const e=I(),a=new Map;e.forEach((e=>{a.set(e.id,{...e,products:[]})}));const c=e.map((e=>X(parseInt(e.id)))),r=await Promise.all(c);r.forEach(((t,c)=>{const r=e[c].id;a.has(r)&&(a.get(r).products=t)})),t.value=Array.from(a.values())}catch(e){console.error("初始化数据失败:",e)}finally{E.value=!1}},x=(0,c.EW)((()=>{const e=b.value.toLowerCase();return e?t.value.map((a=>({...a,products:a.products.filter((a=>(a.name||"").toLowerCase().includes(e)||(a.description||"").toLowerCase().includes(e)))}))).filter((e=>e.products.length>0)):t.value})),K=()=>{},j=e=>{const t=localStorage.getItem("username")||"";a.push(`/buyer/${t}/product/${e}`)};return(0,c.sV)(F),(e,a)=>{const t=(0,c.g2)("el-icon"),o=(0,c.g2)("el-input"),l=(0,c.g2)("el-skeleton"),I=(0,c.g2)("el-image"),X=(0,c.g2)("el-empty");return(0,c.uX)(),(0,c.CE)("div",n,[(0,c.Lk)("div",d,[(0,c.bF)(o,{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),placeholder:"请输入商品名称或关键词",clearable:"",onInput:K,style:{"max-width":"400px"}},{prefix:(0,c.k6)((()=>[(0,c.bF)(t,null,{default:(0,c.k6)((()=>[(0,c.bF)((0,r.R1)(i.vji))])),_:1})])),_:1},8,["modelValue"])]),E.value?((0,c.uX)(),(0,c.CE)("div",u,[(0,c.bF)(l,{rows:6,animated:""})])):((0,c.uX)(!0),(0,c.CE)(c.FK,{key:1},(0,c.pI)(x.value,(a=>((0,c.uX)(),(0,c.CE)("div",{class:"category-section",key:a.id},[(0,c.Lk)("div",p,[(0,c.Lk)("h2",m,(0,s.v_)(a.name),1),a.picture?((0,c.uX)(),(0,c.Wv)(I,{key:0,src:e.formatImageUrl(a.picture),style:{width:"120px",height:"40px","margin-left":"15px"},fit:"contain"},null,8,["src"])):(0,c.Q3)("",!0)]),a.products.length>0?((0,c.uX)(),(0,c.CE)("div",g,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(a.products,(e=>((0,c.uX)(),(0,c.CE)("div",{key:e.id,class:"product-card",onClick:a=>j(e.id)},[(0,c.Lk)("div",h,[(0,c.bF)(I,{src:_(e.images),class:"product-image",style:{width:"100%",height:"200px"},fit:"cover"},null,8,["src"])]),(0,c.Lk)("div",k,[(0,c.Lk)("h3",y,(0,s.v_)(e.name),1),(0,c.Lk)("p",f,(0,s.v_)(e.description||"暂无描述"),1),(0,c.Lk)("div",C,[(0,c.Lk)("span",L,"¥"+(0,s.v_)(e.price),1)])])],8,v)))),128))])):((0,c.uX)(),(0,c.CE)("div",w,[(0,c.bF)(X,{description:"该分类下暂无商品"})]))])))),128))])}}},E=t(1241);const I=(0,E.A)(b,[["__scopeId","data-v-0cd9164e"]]);var _=I}}]);
//# sourceMappingURL=429.c37c592d.js.map