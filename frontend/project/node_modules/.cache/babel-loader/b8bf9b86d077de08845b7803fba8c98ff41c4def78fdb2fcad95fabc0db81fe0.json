{"ast":null,"code":"import { ref, reactive, onMounted } from 'vue';\nimport { ElMessage } from 'element-plus';\n\n// 用户信息（响应式对象）\n\nexport default {\n  __name: 'UserProfile',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const userInfo = ref({\n      username: '',\n      address: ''\n    });\n\n    // 对话框显示状态\n    const dialogVisible = ref(false);\n\n    // 表单引用\n    const formRef = ref();\n\n    // 编辑表单数据\n    const editForm = reactive({\n      username: '',\n      address: ''\n    });\n\n    // 表单验证规则\n    const rules = reactive({\n      username: [{\n        required: true,\n        message: '请输入用户名',\n        trigger: 'blur'\n      }, {\n        min: 2,\n        max: 20,\n        message: '长度在 2 到 20 个字符',\n        trigger: 'blur'\n      }],\n      address: [{\n        required: true,\n        message: '请输入收货地址',\n        trigger: 'blur'\n      }, {\n        max: 100,\n        message: '最多 100 个字符',\n        trigger: 'blur'\n      }]\n    });\n\n    // 初始化加载本地数据\n    onMounted(() => {\n      loadLocalData();\n    });\n\n    // 加载本地存储数据\n    const loadLocalData = () => {\n      const localData = localStorage.getItem('userInfo');\n      if (localData) {\n        try {\n          userInfo.value = JSON.parse(localData);\n        } catch {\n          ElMessage.error('本地数据解析失败');\n        }\n      }\n    };\n\n    // 显示编辑对话框\n    const showEditDialog = () => {\n      // 用当前值初始化表单\n      editForm.username = userInfo.value.username;\n      editForm.address = userInfo.value.address;\n      dialogVisible.value = true;\n    };\n\n    // 处理表单提交\n    const handleSubmit = async () => {\n      try {\n        // 表单验证\n        await formRef.value.validate();\n\n        // 更新用户信息\n        userInfo.value.username = editForm.username;\n        userInfo.value.address = editForm.address;\n\n        // 保存到本地存储\n        localStorage.setItem('userInfo', JSON.stringify(userInfo.value));\n        ElMessage.success('修改成功');\n        dialogVisible.value = false;\n      } catch (error) {\n        ElMessage.warning('请正确填写表单');\n      }\n    };\n    const __returned__ = {\n      userInfo,\n      dialogVisible,\n      formRef,\n      editForm,\n      rules,\n      loadLocalData,\n      showEditDialog,\n      handleSubmit,\n      ref,\n      reactive,\n      onMounted,\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","onMounted","ElMessage","userInfo","username","address","dialogVisible","formRef","editForm","rules","required","message","trigger","min","max","loadLocalData","localData","localStorage","getItem","value","JSON","parse","error","showEditDialog","handleSubmit","validate","setItem","stringify","success","warning"],"sources":["E:/实验例子/project/src/components/UserProfile.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-profile\">\r\n    <h2>我的信息</h2>\r\n    \r\n    <el-card class=\"info-card\">\r\n      <div class=\"info-item\">\r\n        <label>用户名：</label>\r\n        <span>{{ userInfo.username || '未设置' }}</span>\r\n      </div>\r\n      <div class=\"info-item\">\r\n        <label>收货地址：</label>\r\n        <span>{{ userInfo.address || '暂无收货地址' }}</span>\r\n      </div>\r\n      <el-button type=\"primary\" @click=\"showEditDialog\">编辑信息</el-button>\r\n    </el-card>\r\n\r\n    <!-- 编辑对话框 -->\r\n    <el-dialog v-model=\"dialogVisible\" title=\"编辑个人信息\" width=\"500px\">\r\n      <el-form \r\n        :model=\"editForm\" \r\n        :rules=\"rules\"\r\n        ref=\"formRef\"\r\n        label-width=\"80px\"\r\n      >\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"editForm.username\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"收货地址\" prop=\"address\">\r\n          <el-input \r\n            v-model=\"editForm.address\" \r\n            type=\"textarea\"\r\n            :rows=\"3\"\r\n            placeholder=\"请输入详细收货地址\"\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSubmit\">保存</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\n\r\n// 用户信息（响应式对象）\r\nconst userInfo = ref({\r\n  username: '',\r\n  address: ''\r\n})\r\n\r\n// 对话框显示状态\r\nconst dialogVisible = ref(false)\r\n\r\n// 表单引用\r\nconst formRef = ref()\r\n\r\n// 编辑表单数据\r\nconst editForm = reactive({\r\n  username: '',\r\n  address: ''\r\n})\r\n\r\n// 表单验证规则\r\nconst rules = reactive({\r\n  username: [\r\n    { required: true, message: '请输入用户名', trigger: 'blur' },\r\n    { min: 2, max: 20, message: '长度在 2 到 20 个字符', trigger: 'blur' }\r\n  ],\r\n  address: [\r\n    { required: true, message: '请输入收货地址', trigger: 'blur' },\r\n    { max: 100, message: '最多 100 个字符', trigger: 'blur' }\r\n  ]\r\n})\r\n\r\n// 初始化加载本地数据\r\nonMounted(() => {\r\n  loadLocalData()\r\n})\r\n\r\n// 加载本地存储数据\r\nconst loadLocalData = () => {\r\n  const localData = localStorage.getItem('userInfo')\r\n  if (localData) {\r\n    try {\r\n      userInfo.value = JSON.parse(localData)\r\n    } catch {\r\n      ElMessage.error('本地数据解析失败')\r\n    }\r\n  }\r\n}\r\n\r\n// 显示编辑对话框\r\nconst showEditDialog = () => {\r\n  // 用当前值初始化表单\r\n  editForm.username = userInfo.value.username\r\n  editForm.address = userInfo.value.address\r\n  dialogVisible.value = true\r\n}\r\n\r\n// 处理表单提交\r\nconst handleSubmit = async () => {\r\n  try {\r\n    // 表单验证\r\n    await formRef.value.validate()\r\n    \r\n    // 更新用户信息\r\n    userInfo.value.username = editForm.username\r\n    userInfo.value.address = editForm.address\r\n    \r\n    // 保存到本地存储\r\n    localStorage.setItem('userInfo', JSON.stringify(userInfo.value))\r\n    \r\n    ElMessage.success('修改成功')\r\n    dialogVisible.value = false\r\n  } catch (error) {\r\n    ElMessage.warning('请正确填写表单')\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.info-card {\r\n  max-width: 600px;\r\n  margin: 20px;\r\n  padding: 20px;\r\n}\r\n\r\n.info-item {\r\n  margin: 15px 0;\r\n  font-size: 16px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.info-item label {\r\n  font-weight: bold;\r\n  color: #666;\r\n  min-width: 80px;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n</style>"],"mappings":"AAgDA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,KAAK;AAC9C,SAASC,SAAS,QAAQ,cAAc;;AAExC;;;;;;;;IACA,MAAMC,QAAQ,GAAGJ,GAAG,CAAC;MACnBK,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE;IACX,CAAC,CAAC;;IAEF;IACA,MAAMC,aAAa,GAAGP,GAAG,CAAC,KAAK,CAAC;;IAEhC;IACA,MAAMQ,OAAO,GAAGR,GAAG,CAAC,CAAC;;IAErB;IACA,MAAMS,QAAQ,GAAGR,QAAQ,CAAC;MACxBI,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE;IACX,CAAC,CAAC;;IAEF;IACA,MAAMI,KAAK,GAAGT,QAAQ,CAAC;MACrBI,QAAQ,EAAE,CACR;QAAEM,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,QAAQ;QAAEC,OAAO,EAAE;MAAO,CAAC,EACtD;QAAEC,GAAG,EAAE,CAAC;QAAEC,GAAG,EAAE,EAAE;QAAEH,OAAO,EAAE,gBAAgB;QAAEC,OAAO,EAAE;MAAO,CAAC,CAChE;MACDP,OAAO,EAAE,CACP;QAAEK,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,SAAS;QAAEC,OAAO,EAAE;MAAO,CAAC,EACvD;QAAEE,GAAG,EAAE,GAAG;QAAEH,OAAO,EAAE,YAAY;QAAEC,OAAO,EAAE;MAAO,CAAC;IAExD,CAAC,CAAC;;IAEF;IACAX,SAAS,CAAC,MAAM;MACdc,aAAa,CAAC,CAAC;IACjB,CAAC,CAAC;;IAEF;IACA,MAAMA,aAAa,GAAGA,CAAA,KAAM;MAC1B,MAAMC,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;MAClD,IAAIF,SAAS,EAAE;QACb,IAAI;UACFb,QAAQ,CAACgB,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACL,SAAS,CAAC;QACxC,CAAC,CAAC,MAAM;UACNd,SAAS,CAACoB,KAAK,CAAC,UAAU,CAAC;QAC7B;MACF;IACF,CAAC;;IAED;IACA,MAAMC,cAAc,GAAGA,CAAA,KAAM;MAC3B;MACAf,QAAQ,CAACJ,QAAQ,GAAGD,QAAQ,CAACgB,KAAK,CAACf,QAAQ;MAC3CI,QAAQ,CAACH,OAAO,GAAGF,QAAQ,CAACgB,KAAK,CAACd,OAAO;MACzCC,aAAa,CAACa,KAAK,GAAG,IAAI;IAC5B,CAAC;;IAED;IACA,MAAMK,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF;QACA,MAAMjB,OAAO,CAACY,KAAK,CAACM,QAAQ,CAAC,CAAC;;QAE9B;QACAtB,QAAQ,CAACgB,KAAK,CAACf,QAAQ,GAAGI,QAAQ,CAACJ,QAAQ;QAC3CD,QAAQ,CAACgB,KAAK,CAACd,OAAO,GAAGG,QAAQ,CAACH,OAAO;;QAEzC;QACAY,YAAY,CAACS,OAAO,CAAC,UAAU,EAAEN,IAAI,CAACO,SAAS,CAACxB,QAAQ,CAACgB,KAAK,CAAC,CAAC;QAEhEjB,SAAS,CAAC0B,OAAO,CAAC,MAAM,CAAC;QACzBtB,aAAa,CAACa,KAAK,GAAG,KAAK;MAC7B,CAAC,CAAC,OAAOG,KAAK,EAAE;QACdpB,SAAS,CAAC2B,OAAO,CAAC,SAAS,CAAC;MAC9B;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}