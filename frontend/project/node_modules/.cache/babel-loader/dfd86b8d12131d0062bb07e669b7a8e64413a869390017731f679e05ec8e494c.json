{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nexport default {\n  __name: 'BusinessView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    // 方法部分增强验证\n    const handleEdit = productId => {\n      if (!productId) {\n        ElMessage.warning('请选择有效的商品');\n        return;\n      }\n      const product = products.value.find(p => p.id === productId);\n      if (!product) {\n        ElMessage.error('未找到对应商品');\n        return;\n      }\n      currentProduct.value = {\n        ...product\n      };\n      isEditing.value = true;\n      productDialogVisible.value = true;\n    };\n    const handleDelete = productId => {\n      if (!productId) {\n        ElMessage.warning('请选择要删除的商品');\n        return;\n      }\n      const index = products.value.findIndex(p => p.id === productId);\n      if (index === -1) {\n        ElMessage.error('商品不存在');\n        return;\n      }\n      products.value.splice(index, 1);\n      ElMessage.success('商品已删除');\n    };\n    const handleShip = order => {\n      if (!order?.orderId) {\n        ElMessage.error('无效的订单数据');\n        return;\n      }\n      const target = orders.value.find(o => o.orderId === order.orderId);\n      if (!target) {\n        ElMessage.error('订单不存在');\n        return;\n      }\n      target.status = 'shipped';\n      ElMessage.success('发货状态已更新');\n    };\n    const handleReply = review => {\n      if (!review?.productName) {\n        ElMessage.warning('无效的评价数据');\n        return;\n      }\n      currentReview.value = review;\n      replyDialogVisible.value = true;\n    };\n    const __returned__ = {\n      handleEdit,\n      handleDelete,\n      handleShip,\n      handleReply\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["handleEdit","productId","ElMessage","warning","product","products","value","find","p","id","error","currentProduct","isEditing","productDialogVisible","handleDelete","index","findIndex","splice","success","handleShip","order","orderId","target","orders","o","status","handleReply","review","productName","currentReview","replyDialogVisible"],"sources":["E:/实验例子/project/src/views/BusinessView.vue"],"sourcesContent":["<template>\r\n  <div class=\"business-container\">\r\n    <!-- 顶部操作栏 -->\r\n    <div class=\"action-bar\">\r\n      <el-button class=\"logout-btn\" type=\"text\" @click=\"logout\">退出登录</el-button>\r\n    </div>\r\n\r\n    <!-- 左侧功能面板 -->\r\n    <div class=\"function-panel\">\r\n      <div \r\n        v-for=\"item in functions\" \r\n        :key=\"item.key\"\r\n        class=\"function-card\"\r\n        :class=\"{ active: currentView === item.key }\"\r\n        @click=\"switchView(item.key)\"\r\n      >\r\n        {{ item.label }}\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 右侧内容区 -->\r\n    <div class=\"content-area\">\r\n      <!-- 商品管理 -->\r\n      <div v-if=\"currentView === 'products'\" class=\"product-section\">\r\n        <div class=\"table-header\">\r\n          <el-input \r\n            v-model=\"productFilter.keyword\" \r\n            placeholder=\"输入商品名称\" \r\n            style=\"width: 200px\"\r\n            clearable\r\n          />\r\n          <el-button type=\"primary\" icon=\"Plus\" @click=\"showAddDialog\">新增商品</el-button>\r\n        </div>\r\n        \r\n        <el-table :data=\"filteredProducts\" border style=\"width: 100%\">\r\n          <el-table-column prop=\"name\" label=\"商品名称\" width=\"180\" />\r\n          <el-table-column label=\"价格\" width=\"120\" align=\"right\">\r\n            <template #default=\"{ row = {} }\">\r\n              ¥{{ (row.price || 0).toFixed(2) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"stock\" label=\"库存\" width=\"120\" />\r\n          <el-table-column label=\"状态\" width=\"120\">\r\n            <template #default=\"{ row = {} }\">\r\n              <el-tag :type=\"row.status === 'published' ? 'success' : 'info'\">\r\n                {{ row.status || '未设置' }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"200\">\r\n            <template #default=\"{ row = {} }\">\r\n              <el-button \r\n                size=\"small\" \r\n                @click=\"handleEdit(row?.id)\"\r\n              >编辑</el-button>\r\n              <el-button \r\n                size=\"small\" \r\n                type=\"danger\"\r\n                @click=\"handleDelete(row?.id)\"\r\n              >删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n\r\n      <!-- 订单管理 -->\r\n      <div v-if=\"currentView === 'orders'\" class=\"order-section\">\r\n        <div class=\"filter-bar\">\r\n          <div class=\"filter-group\">\r\n            <el-select \r\n              v-model=\"orderFilter.status\" \r\n              placeholder=\"订单状态\" \r\n              style=\"width: 120px\"\r\n            >\r\n              <el-option label=\"全部\" value=\"all\" />\r\n              <el-option label=\"待付款\" value=\"pending\" />\r\n              <el-option label=\"已发货\" value=\"shipped\" />\r\n              <el-option label=\"已完成\" value=\"completed\" />\r\n            </el-select>\r\n            <el-date-picker\r\n              v-model=\"orderFilter.dateRange\"\r\n              type=\"daterange\"\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n            />\r\n          </div>\r\n          <el-button type=\"primary\" icon=\"Search\">搜索</el-button>\r\n        </div>\r\n\r\n        <el-table :data=\"filteredOrders\" border style=\"width: 100%\">\r\n          <el-table-column prop=\"orderId\" label=\"订单号\" width=\"180\" />\r\n          <el-table-column prop=\"createTime\" label=\"下单时间\" width=\"180\" />\r\n          <el-table-column label=\"金额\" width=\"120\" align=\"right\">\r\n            <template #default=\"{ row = {} }\">\r\n              ¥{{ (row.amount || 0).toFixed(2) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"状态\" width=\"120\">\r\n            <template #default=\"{ row = {} }\">\r\n              <el-tag :type=\"statusMap[row.status]?.type || 'info'\" size=\"small\">\r\n                {{ statusMap[row.status]?.text || '未知状态' }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"150\">\r\n            <template #default=\"{ row = {} }\">\r\n              <el-button \r\n                size=\"small\" \r\n                @click=\"handleViewDetail(row?.orderId)\"\r\n              >详情</el-button>\r\n              <el-button \r\n                v-if=\"row?.status === 'pending'\"\r\n                size=\"small\" \r\n                type=\"success\"\r\n                @click=\"handleShip(row)\"\r\n              >发货</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n\r\n      <!-- 评价管理 -->\r\n      <div v-if=\"currentView === 'reviews'\" class=\"review-section\">\r\n        <div class=\"filter-bar\">\r\n          <el-input \r\n            v-model=\"reviewFilter.keyword\" \r\n            placeholder=\"搜索商品名称\" \r\n            style=\"width: 200px\"\r\n          />\r\n          <el-select \r\n            v-model=\"reviewFilter.rating\" \r\n            placeholder=\"评分筛选\" \r\n            style=\"width: 120px\"\r\n          >\r\n            <el-option label=\"全部\" value=\"0\" />\r\n            <el-option label=\"5星\" value=\"5\" />\r\n            <el-option label=\"4星\" value=\"4\" />\r\n            <el-option label=\"3星及以下\" value=\"3\" />\r\n          </el-select>\r\n        </div>\r\n\r\n        <el-table :data=\"filteredReviews\" border style=\"width: 100%\">\r\n          <el-table-column prop=\"productName\" label=\"商品名称\" width=\"180\" />\r\n          <el-table-column label=\"评分\" width=\"120\">\r\n            <template #default=\"{ row = {} }\">\r\n              <el-rate \r\n                :model-value=\"row.rating || 0\"\r\n                disabled \r\n                :colors=\"['#99A9BF', '#F7BA2A', '#FF9900']\"\r\n              />\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"content\" label=\"评价内容\" />\r\n          <el-table-column prop=\"createTime\" label=\"评价时间\" width=\"180\" />\r\n          <el-table-column label=\"操作\" width=\"120\">\r\n            <template #default=\"{ row = {} }\">\r\n              <el-button \r\n                v-if=\"!row.replied\"\r\n                type=\"primary\" \r\n                size=\"small\"\r\n                @click=\"handleReply(row)\"\r\n              >回复</el-button>\r\n              <span v-else class=\"replied-text\">已回复</span>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 对话框等其余代码保持不变 -->\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n// 方法部分增强验证\r\nconst handleEdit = (productId) => {\r\n  if (!productId) {\r\n    ElMessage.warning('请选择有效的商品')\r\n    return\r\n  }\r\n  const product = products.value.find(p => p.id === productId)\r\n  if (!product) {\r\n    ElMessage.error('未找到对应商品')\r\n    return\r\n  }\r\n  currentProduct.value = { ...product }\r\n  isEditing.value = true\r\n  productDialogVisible.value = true\r\n}\r\n\r\nconst handleDelete = (productId) => {\r\n  if (!productId) {\r\n    ElMessage.warning('请选择要删除的商品')\r\n    return\r\n  }\r\n  const index = products.value.findIndex(p => p.id === productId)\r\n  if (index === -1) {\r\n    ElMessage.error('商品不存在')\r\n    return\r\n  }\r\n  products.value.splice(index, 1)\r\n  ElMessage.success('商品已删除')\r\n}\r\n\r\nconst handleShip = (order) => {\r\n  if (!order?.orderId) {\r\n    ElMessage.error('无效的订单数据')\r\n    return\r\n  }\r\n  const target = orders.value.find(o => o.orderId === order.orderId)\r\n  if (!target) {\r\n    ElMessage.error('订单不存在')\r\n    return\r\n  }\r\n  target.status = 'shipped'\r\n  ElMessage.success('发货状态已更新')\r\n}\r\n\r\nconst handleReply = (review) => {\r\n  if (!review?.productName) {\r\n    ElMessage.warning('无效的评价数据')\r\n    return\r\n  }\r\n  currentReview.value = review\r\n  replyDialogVisible.value = true\r\n}\r\n</script>"],"mappings":";;;;;;;;;IA+KA;IACA,MAAMA,UAAU,GAAIC,SAAS,IAAK;MAChC,IAAI,CAACA,SAAS,EAAE;QACdC,SAAS,CAACC,OAAO,CAAC,UAAU,CAAC;QAC7B;MACF;MACA,MAAMC,OAAO,GAAGC,QAAQ,CAACC,KAAK,CAACC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKR,SAAS,CAAC;MAC5D,IAAI,CAACG,OAAO,EAAE;QACZF,SAAS,CAACQ,KAAK,CAAC,SAAS,CAAC;QAC1B;MACF;MACAC,cAAc,CAACL,KAAK,GAAG;QAAE,GAAGF;MAAQ,CAAC;MACrCQ,SAAS,CAACN,KAAK,GAAG,IAAI;MACtBO,oBAAoB,CAACP,KAAK,GAAG,IAAI;IACnC,CAAC;IAED,MAAMQ,YAAY,GAAIb,SAAS,IAAK;MAClC,IAAI,CAACA,SAAS,EAAE;QACdC,SAAS,CAACC,OAAO,CAAC,WAAW,CAAC;QAC9B;MACF;MACA,MAAMY,KAAK,GAAGV,QAAQ,CAACC,KAAK,CAACU,SAAS,CAACR,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKR,SAAS,CAAC;MAC/D,IAAIc,KAAK,KAAK,CAAC,CAAC,EAAE;QAChBb,SAAS,CAACQ,KAAK,CAAC,OAAO,CAAC;QACxB;MACF;MACAL,QAAQ,CAACC,KAAK,CAACW,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;MAC/Bb,SAAS,CAACgB,OAAO,CAAC,OAAO,CAAC;IAC5B,CAAC;IAED,MAAMC,UAAU,GAAIC,KAAK,IAAK;MAC5B,IAAI,CAACA,KAAK,EAAEC,OAAO,EAAE;QACnBnB,SAAS,CAACQ,KAAK,CAAC,SAAS,CAAC;QAC1B;MACF;MACA,MAAMY,MAAM,GAAGC,MAAM,CAACjB,KAAK,CAACC,IAAI,CAACiB,CAAC,IAAIA,CAAC,CAACH,OAAO,KAAKD,KAAK,CAACC,OAAO,CAAC;MAClE,IAAI,CAACC,MAAM,EAAE;QACXpB,SAAS,CAACQ,KAAK,CAAC,OAAO,CAAC;QACxB;MACF;MACAY,MAAM,CAACG,MAAM,GAAG,SAAS;MACzBvB,SAAS,CAACgB,OAAO,CAAC,SAAS,CAAC;IAC9B,CAAC;IAED,MAAMQ,WAAW,GAAIC,MAAM,IAAK;MAC9B,IAAI,CAACA,MAAM,EAAEC,WAAW,EAAE;QACxB1B,SAAS,CAACC,OAAO,CAAC,SAAS,CAAC;QAC5B;MACF;MACA0B,aAAa,CAACvB,KAAK,GAAGqB,MAAM;MAC5BG,kBAAkB,CAACxB,KAAK,GAAG,IAAI;IACjC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}