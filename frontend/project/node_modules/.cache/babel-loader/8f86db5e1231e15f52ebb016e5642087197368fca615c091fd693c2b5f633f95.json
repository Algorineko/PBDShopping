{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { ref, computed, onMounted } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport { Search } from '@element-plus/icons-vue';\nexport default {\n  __name: 'UserReviews',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const searchKeyword = ref('');\n    const reviews = ref([]);\n    const editDialogVisible = ref(false);\n    const editingReview = ref(null);\n    const loadReviews = () => {\n      reviews.value = JSON.parse(localStorage.getItem('reviews') || '[]');\n    };\n    const formatDate = dateString => {\n      return new Date(dateString).toLocaleDateString();\n    };\n    const filteredReviews = computed(() => {\n      return reviews.value.filter(review => review.productName?.toLowerCase().includes(searchKeyword.value.toLowerCase()));\n    });\n    const editReview = review => {\n      editingReview.value = {\n        ...review\n      };\n      editDialogVisible.value = true;\n    };\n    const deleteReview = review => {\n      reviews.value = reviews.value.filter(r => r.date !== review.date);\n      localStorage.setItem('reviews', JSON.stringify(reviews.value));\n      ElMessage.success('评价已删除');\n    };\n    const saveEdit = () => {\n      const index = reviews.value.findIndex(r => r.date === editingReview.value.date);\n      if (index > -1) {\n        reviews.value[index] = editingReview.value;\n        localStorage.setItem('reviews', JSON.stringify(reviews.value));\n        ElMessage.success('修改已保存');\n      }\n      editDialogVisible.value = false;\n    };\n    onMounted(loadReviews);\n    const __returned__ = {\n      searchKeyword,\n      reviews,\n      editDialogVisible,\n      editingReview,\n      loadReviews,\n      formatDate,\n      filteredReviews,\n      editReview,\n      deleteReview,\n      saveEdit,\n      ref,\n      computed,\n      onMounted,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get Search() {\n        return Search;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","ElMessage","Search","searchKeyword","reviews","editDialogVisible","editingReview","loadReviews","value","JSON","parse","localStorage","getItem","formatDate","dateString","Date","toLocaleDateString","filteredReviews","filter","review","productName","toLowerCase","includes","editReview","deleteReview","r","date","setItem","stringify","success","saveEdit","index","findIndex"],"sources":["E:/实验例子/project/src/components/UserReviews.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-reviews\">\r\n    <h2>我的评价</h2>\r\n    \r\n    <el-input\r\n      v-model=\"searchKeyword\"\r\n      placeholder=\"搜索商品名称\"\r\n      clearable\r\n      style=\"width: 300px; margin-bottom: 20px\"\r\n    >\r\n      <template #prefix>\r\n        <el-icon><Search /></el-icon>\r\n      </template>\r\n    </el-input>\r\n\r\n    <el-table :data=\"filteredReviews\" border>\r\n      <el-table-column prop=\"productName\" label=\"商品名称\" width=\"200\"/>\r\n      <el-table-column label=\"评分\" width=\"120\">\r\n        <template #default=\"scope\">\r\n          <el-rate :model-value=\"scope.row.rating\" disabled/>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"content\" label=\"评价内容\"/>\r\n      <el-table-column prop=\"date\" label=\"评价时间\" width=\"180\">\r\n        <template #default=\"scope\">\r\n          {{ formatDate(scope.row.date) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"150\">\r\n        <template #default=\"scope\">\r\n          <el-button size=\"small\" @click=\"editReview(scope.row)\">编辑</el-button>\r\n          <el-button type=\"danger\" size=\"small\" @click=\"deleteReview(scope.row)\">\r\n            删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog v-model=\"editDialogVisible\" title=\"编辑评价\">\r\n      <el-form :model=\"editingReview\">\r\n        <el-form-item label=\"评分\">\r\n          <el-rate v-model=\"editingReview.rating\" :max=\"5\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"评价内容\">\r\n          <el-input v-model=\"editingReview.content\" type=\"textarea\" rows=\"4\"/>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <el-button @click=\"editDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveEdit\">保存</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Search } from '@element-plus/icons-vue'\r\n\r\nconst searchKeyword = ref('')\r\nconst reviews = ref([])\r\nconst editDialogVisible = ref(false)\r\nconst editingReview = ref(null)\r\n\r\nconst loadReviews = () => {\r\n  reviews.value = JSON.parse(localStorage.getItem('reviews') || '[]')\r\n}\r\n\r\nconst formatDate = (dateString) => {\r\n  return new Date(dateString).toLocaleDateString()\r\n}\r\n\r\nconst filteredReviews = computed(() => {\r\n  return reviews.value.filter(review =>\r\n    review.productName?.toLowerCase().includes(searchKeyword.value.toLowerCase())\r\n  )\r\n})\r\n\r\nconst editReview = (review) => {\r\n  editingReview.value = { ...review }\r\n  editDialogVisible.value = true\r\n}\r\n\r\nconst deleteReview = (review) => {\r\n  reviews.value = reviews.value.filter(r => r.date !== review.date)\r\n  localStorage.setItem('reviews', JSON.stringify(reviews.value))\r\n  ElMessage.success('评价已删除')\r\n}\r\n\r\nconst saveEdit = () => {\r\n  const index = reviews.value.findIndex(r => r.date === editingReview.value.date)\r\n  if (index > -1) {\r\n    reviews.value[index] = editingReview.value\r\n    localStorage.setItem('reviews', JSON.stringify(reviews.value))\r\n    ElMessage.success('修改已保存')\r\n  }\r\n  editDialogVisible.value = false\r\n}\r\n\r\nonMounted(loadReviews)\r\n</script>\r\n\r\n<style scoped>\r\n.user-reviews {\r\n  padding: 20px;\r\n  background: #fff;\r\n}\r\n\r\n.empty-tip {\r\n  margin-top: 50px;\r\n}\r\n</style>"],"mappings":";;AAwDA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,KAAK;AAC9C,SAASC,SAAS,QAAQ,cAAc;AACxC,SAASC,MAAM,QAAQ,yBAAyB;;;;;;;IAEhD,MAAMC,aAAa,GAAGL,GAAG,CAAC,EAAE,CAAC;IAC7B,MAAMM,OAAO,GAAGN,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMO,iBAAiB,GAAGP,GAAG,CAAC,KAAK,CAAC;IACpC,MAAMQ,aAAa,GAAGR,GAAG,CAAC,IAAI,CAAC;IAE/B,MAAMS,WAAW,GAAGA,CAAA,KAAM;MACxBH,OAAO,CAACI,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC;IACrE,CAAC;IAED,MAAMC,UAAU,GAAIC,UAAU,IAAK;MACjC,OAAO,IAAIC,IAAI,CAACD,UAAU,CAAC,CAACE,kBAAkB,CAAC,CAAC;IAClD,CAAC;IAED,MAAMC,eAAe,GAAGlB,QAAQ,CAAC,MAAM;MACrC,OAAOK,OAAO,CAACI,KAAK,CAACU,MAAM,CAACC,MAAM,IAChCA,MAAM,CAACC,WAAW,EAAEC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACnB,aAAa,CAACK,KAAK,CAACa,WAAW,CAAC,CAAC,CAC9E,CAAC;IACH,CAAC,CAAC;IAEF,MAAME,UAAU,GAAIJ,MAAM,IAAK;MAC7Bb,aAAa,CAACE,KAAK,GAAG;QAAE,GAAGW;MAAO,CAAC;MACnCd,iBAAiB,CAACG,KAAK,GAAG,IAAI;IAChC,CAAC;IAED,MAAMgB,YAAY,GAAIL,MAAM,IAAK;MAC/Bf,OAAO,CAACI,KAAK,GAAGJ,OAAO,CAACI,KAAK,CAACU,MAAM,CAACO,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAKP,MAAM,CAACO,IAAI,CAAC;MACjEf,YAAY,CAACgB,OAAO,CAAC,SAAS,EAAElB,IAAI,CAACmB,SAAS,CAACxB,OAAO,CAACI,KAAK,CAAC,CAAC;MAC9DP,SAAS,CAAC4B,OAAO,CAAC,OAAO,CAAC;IAC5B,CAAC;IAED,MAAMC,QAAQ,GAAGA,CAAA,KAAM;MACrB,MAAMC,KAAK,GAAG3B,OAAO,CAACI,KAAK,CAACwB,SAAS,CAACP,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAKpB,aAAa,CAACE,KAAK,CAACkB,IAAI,CAAC;MAC/E,IAAIK,KAAK,GAAG,CAAC,CAAC,EAAE;QACd3B,OAAO,CAACI,KAAK,CAACuB,KAAK,CAAC,GAAGzB,aAAa,CAACE,KAAK;QAC1CG,YAAY,CAACgB,OAAO,CAAC,SAAS,EAAElB,IAAI,CAACmB,SAAS,CAACxB,OAAO,CAACI,KAAK,CAAC,CAAC;QAC9DP,SAAS,CAAC4B,OAAO,CAAC,OAAO,CAAC;MAC5B;MACAxB,iBAAiB,CAACG,KAAK,GAAG,KAAK;IACjC,CAAC;IAEDR,SAAS,CAACO,WAAW,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}