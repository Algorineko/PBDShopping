{"ast":null,"code":"import { ElMessage } from 'element-plus';\nimport productApi from '../services/product';\nexport default {\n  data() {\n    return {\n      products: [],\n      newProduct: {\n        name: '',\n        price: 0,\n        description: '',\n        stock: 0,\n        status: 'draft'\n      },\n      editingProduct: {},\n      editDialogVisible: false\n    };\n  },\n  async mounted() {\n    await this.loadProducts();\n  },\n  methods: {\n    async loadProducts() {\n      try {\n        const res = await productApi.getBusinessProducts();\n        this.products = res.data;\n      } catch (error) {\n        ElMessage.error('加载商品失败');\n      }\n    },\n    async createProduct() {\n      try {\n        await productApi.createProduct(this.newProduct);\n        ElMessage.success('商品添加成功');\n        await this.loadProducts();\n        this.newProduct = {/* 重置表单 */};\n      } catch (error) {\n        ElMessage.error('添加商品失败');\n      }\n    },\n    editProduct(product) {\n      this.editingProduct = {\n        ...product\n      };\n      this.editDialogVisible = true;\n    },\n    async updateProduct() {\n      try {\n        await productApi.updateProduct(this.editingProduct._id, this.editingProduct);\n        ElMessage.success('更新成功');\n        this.editDialogVisible = false;\n        await this.loadProducts();\n      } catch (error) {\n        ElMessage.error('更新失败');\n      }\n    },\n    async deleteProduct(id) {\n      try {\n        await productApi.deleteProduct(id);\n        ElMessage.success('删除成功');\n        await this.loadProducts();\n      } catch (error) {\n        ElMessage.error('删除失败');\n      }\n    }\n  }\n};","map":{"version":3,"names":["ElMessage","productApi","data","products","newProduct","name","price","description","stock","status","editingProduct","editDialogVisible","mounted","loadProducts","methods","res","getBusinessProducts","error","createProduct","success","editProduct","product","updateProduct","_id","deleteProduct","id"],"sources":["E:\\实验例子\\project\\src\\views\\BusinessView.vue"],"sourcesContent":["<template>\r\n  <div class=\"business-view\">\r\n    <h1>商品管理</h1>\r\n    \r\n    <!-- 添加商品表单 -->\r\n    <div class=\"product-form\">\r\n      <el-form :model=\"newProduct\" label-width=\"80px\">\r\n        <el-form-item label=\"商品名称\">\r\n          <el-input v-model=\"newProduct.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"价格\">\r\n          <el-input-number v-model=\"newProduct.price\" :min=\"0\"></el-input-number>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\">\r\n          <el-input v-model=\"newProduct.description\" type=\"textarea\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"库存\">\r\n          <el-input-number v-model=\"newProduct.stock\" :min=\"0\"></el-input-number>\r\n        </el-form-item>\r\n        <el-form-item label=\"状态\">\r\n          <el-select v-model=\"newProduct.status\">\r\n            <el-option label=\"草稿\" value=\"draft\"></el-option>\r\n            <el-option label=\"上架\" value=\"published\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-button type=\"primary\" @click=\"createProduct\">添加商品</el-button>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 商品列表 -->\r\n    <el-table :data=\"products\" style=\"width: 100%\">\r\n      <el-table-column prop=\"name\" label=\"商品名称\"></el-table-column>\r\n      <el-table-column prop=\"price\" label=\"价格\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"stock\" label=\"库存\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"status\" label=\"状态\" width=\"120\">\r\n        <template #default=\"scope\">\r\n          <el-tag :type=\"scope.row.status === 'published' ? 'success' : 'info'\">\r\n            {{ scope.row.status === 'published' ? '已上架' : '草稿' }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"200\">\r\n        <template #default=\"scope\">\r\n          <el-button size=\"small\" @click=\"editProduct(scope.row)\">编辑</el-button>\r\n          <el-button size=\"small\" type=\"danger\" @click=\"deleteProduct(scope.row._id)\">\r\n            删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 编辑对话框 -->\r\n    <el-dialog v-model=\"editDialogVisible\" title=\"编辑商品\">\r\n      <!-- 编辑表单内容 -->\r\n      <el-form :model=\"editingProduct\">\r\n        <!-- 表单字段同添加表单 -->\r\n      </el-form>\r\n      <template #footer>\r\n        <el-button @click=\"editDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"updateProduct\">确认修改</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ElMessage } from 'element-plus'\r\nimport productApi from '../services/product'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      newProduct: {\r\n        name: '',\r\n        price: 0,\r\n        description: '',\r\n        stock: 0,\r\n        status: 'draft'\r\n      },\r\n      editingProduct: {},\r\n      editDialogVisible: false\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.loadProducts()\r\n  },\r\n  methods: {\r\n    async loadProducts() {\r\n      try {\r\n        const res = await productApi.getBusinessProducts()\r\n        this.products = res.data\r\n      } catch (error) {\r\n        ElMessage.error('加载商品失败')\r\n      }\r\n    },\r\n    async createProduct() {\r\n      try {\r\n        await productApi.createProduct(this.newProduct)\r\n        ElMessage.success('商品添加成功')\r\n        await this.loadProducts()\r\n        this.newProduct = { /* 重置表单 */ }\r\n      } catch (error) {\r\n        ElMessage.error('添加商品失败')\r\n      }\r\n    },\r\n    editProduct(product) {\r\n      this.editingProduct = { ...product }\r\n      this.editDialogVisible = true\r\n    },\r\n    async updateProduct() {\r\n      try {\r\n        await productApi.updateProduct(this.editingProduct._id, this.editingProduct)\r\n        ElMessage.success('更新成功')\r\n        this.editDialogVisible = false\r\n        await this.loadProducts()\r\n      } catch (error) {\r\n        ElMessage.error('更新失败')\r\n      }\r\n    },\r\n    async deleteProduct(id) {\r\n      try {\r\n        await productApi.deleteProduct(id)\r\n        ElMessage.success('删除成功')\r\n        await this.loadProducts()\r\n      } catch (error) {\r\n        ElMessage.error('删除失败')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.business-view {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.product-form {\r\n  margin-bottom: 30px;\r\n  padding: 20px;\r\n  background: #f5f7fa;\r\n  border-radius: 4px;\r\n}\r\n</style>"],"mappings":"AAkEA,SAASA,SAAQ,QAAS,cAAa;AACvC,OAAOC,UAAS,MAAO,qBAAoB;AAE3C,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,UAAU,EAAE;QACVC,IAAI,EAAE,EAAE;QACRC,KAAK,EAAE,CAAC;QACRC,WAAW,EAAE,EAAE;QACfC,KAAK,EAAE,CAAC;QACRC,MAAM,EAAE;MACV,CAAC;MACDC,cAAc,EAAE,CAAC,CAAC;MAClBC,iBAAiB,EAAE;IACrB;EACF,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAACC,YAAY,CAAC;EAC1B,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,YAAYA,CAAA,EAAG;MACnB,IAAI;QACF,MAAME,GAAE,GAAI,MAAMd,UAAU,CAACe,mBAAmB,CAAC;QACjD,IAAI,CAACb,QAAO,GAAIY,GAAG,CAACb,IAAG;MACzB,EAAE,OAAOe,KAAK,EAAE;QACdjB,SAAS,CAACiB,KAAK,CAAC,QAAQ;MAC1B;IACF,CAAC;IACD,MAAMC,aAAaA,CAAA,EAAG;MACpB,IAAI;QACF,MAAMjB,UAAU,CAACiB,aAAa,CAAC,IAAI,CAACd,UAAU;QAC9CJ,SAAS,CAACmB,OAAO,CAAC,QAAQ;QAC1B,MAAM,IAAI,CAACN,YAAY,CAAC;QACxB,IAAI,CAACT,UAAS,GAAI,CAAE,WAAW;MACjC,EAAE,OAAOa,KAAK,EAAE;QACdjB,SAAS,CAACiB,KAAK,CAAC,QAAQ;MAC1B;IACF,CAAC;IACDG,WAAWA,CAACC,OAAO,EAAE;MACnB,IAAI,CAACX,cAAa,GAAI;QAAE,GAAGW;MAAQ;MACnC,IAAI,CAACV,iBAAgB,GAAI,IAAG;IAC9B,CAAC;IACD,MAAMW,aAAaA,CAAA,EAAG;MACpB,IAAI;QACF,MAAMrB,UAAU,CAACqB,aAAa,CAAC,IAAI,CAACZ,cAAc,CAACa,GAAG,EAAE,IAAI,CAACb,cAAc;QAC3EV,SAAS,CAACmB,OAAO,CAAC,MAAM;QACxB,IAAI,CAACR,iBAAgB,GAAI,KAAI;QAC7B,MAAM,IAAI,CAACE,YAAY,CAAC;MAC1B,EAAE,OAAOI,KAAK,EAAE;QACdjB,SAAS,CAACiB,KAAK,CAAC,MAAM;MACxB;IACF,CAAC;IACD,MAAMO,aAAaA,CAACC,EAAE,EAAE;MACtB,IAAI;QACF,MAAMxB,UAAU,CAACuB,aAAa,CAACC,EAAE;QACjCzB,SAAS,CAACmB,OAAO,CAAC,MAAM;QACxB,MAAM,IAAI,CAACN,YAAY,CAAC;MAC1B,EAAE,OAAOI,KAAK,EAAE;QACdjB,SAAS,CAACiB,KAAK,CAAC,MAAM;MACxB;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}