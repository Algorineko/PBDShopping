{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"shopping-cart\"\n};\nconst _hoisted_2 = {\n  class: \"product-name\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"checkout\"\n};\nconst _hoisted_4 = {\n  class: \"total\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_image = _resolveComponent(\"el-image\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_el_input_number = _resolveComponent(\"el-input-number\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"h2\", null, \"购物车 (\" + _toDisplayString($setup.cartItems.length) + \")\", 1 /* TEXT */), $setup.cartItems.length > 0 ? (_openBlock(), _createBlock(_component_el_table, {\n    key: 0,\n    data: $setup.cartItems,\n    border: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      label: \"选择\",\n      width: \"60\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createVNode(_component_el_checkbox, {\n        \"model-value\": $setup.selectedItems.has(row.id),\n        onChange: $event => _ctx.toggleSelection(row.id)\n      }, null, 8 /* PROPS */, [\"model-value\", \"onChange\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"商品\",\n      width: \"300\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createVNode(_component_router_link, {\n        to: `/buyer/product/${row.id}`\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_image, {\n          src: row.image,\n          style: {\n            \"width\": \"80px\",\n            \"height\": \"80px\"\n          }\n        }, null, 8 /* PROPS */, [\"src\"]), _createElementVNode(\"span\", _hoisted_2, _toDisplayString(row.name), 1 /* TEXT */)]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"单价\",\n      width: \"120\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createTextVNode(\"¥\" + _toDisplayString(row.price.toFixed(2)), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"数量\",\n      width: \"150\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createVNode(_component_el_input_number, {\n        modelValue: row.quantity,\n        \"onUpdate:modelValue\": $event => row.quantity = $event,\n        min: 1,\n        max: 99,\n        onChange: $event => _ctx.updateQuantity(row)\n      }, null, 8 /* PROPS */, [\"modelValue\", \"onUpdate:modelValue\", \"onChange\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"操作\",\n      width: \"120\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createVNode(_component_el_button, {\n        type: \"danger\",\n        onClick: $event => _ctx.removeItem(row.id)\n      }, {\n        default: _withCtx(() => _cache[0] || (_cache[0] = [_createTextVNode(\"删除\")])),\n        _: 2 /* DYNAMIC */,\n        __: [0]\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"])) : _createCommentVNode(\"v-if\", true), $setup.cartItems.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, \" 已选 \" + _toDisplayString($setup.selectedCount) + \" 件 总计：¥\" + _toDisplayString($setup.selectedTotal.toFixed(2)), 1 /* TEXT */), _createVNode(_component_el_button, {\n    type: \"primary\",\n    size: \"large\",\n    onClick: $setup.checkout,\n    disabled: $setup.selectedCount === 0\n  }, {\n    default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\" 去结算 \")])),\n    _: 1 /* STABLE */,\n    __: [1]\n  }, 8 /* PROPS */, [\"disabled\"])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","$setup","cartItems","length","_createBlock","_component_el_table","data","border","default","_withCtx","_createVNode","_component_el_table_column","label","width","row","_component_el_checkbox","selectedItems","has","id","onChange","$event","_ctx","toggleSelection","_","_component_router_link","to","_component_el_image","src","image","style","_hoisted_2","name","_createTextVNode","price","toFixed","_component_el_input_number","modelValue","quantity","min","max","updateQuantity","_component_el_button","type","onClick","removeItem","_cache","__","_createCommentVNode","_hoisted_3","_hoisted_4","selectedCount","selectedTotal","size","checkout","disabled"],"sources":["E:\\实验例子\\project\\src\\components\\ShoppingCart.vue"],"sourcesContent":["<template>\r\n  <div class=\"shopping-cart\">\r\n    <h2>购物车 ({{ cartItems.length }})</h2>\r\n    \r\n    <el-table :data=\"cartItems\" border v-if=\"cartItems.length > 0\">\r\n      <el-table-column label=\"选择\" width=\"60\">\r\n        <template #default=\"{ row }\">\r\n          <el-checkbox \r\n            :model-value=\"selectedItems.has(row.id)\"\r\n            @change=\"toggleSelection(row.id)\"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"商品\" width=\"300\">\r\n        <template #default=\"{ row }\">\r\n          <router-link :to=\"`/buyer/product/${row.id}`\">\r\n            <el-image :src=\"row.image\" style=\"width:80px;height:80px\"/>\r\n            <span class=\"product-name\">{{ row.name }}</span>\r\n          </router-link>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"单价\" width=\"120\">\r\n        <template #default=\"{ row }\">¥{{ row.price.toFixed(2) }}</template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"数量\" width=\"150\">\r\n        <template #default=\"{ row }\">\r\n          <el-input-number \r\n            v-model=\"row.quantity\" \r\n            :min=\"1\" \r\n            :max=\"99\"\r\n            @change=\"updateQuantity(row)\"\r\n          />\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"操作\" width=\"120\">\r\n        <template #default=\"{ row }\">\r\n          <el-button type=\"danger\" @click=\"removeItem(row.id)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div class=\"checkout\" v-if=\"cartItems.length > 0\">\r\n      <div class=\"total\">\r\n        已选 {{ selectedCount }} 件 总计：¥{{ selectedTotal.toFixed(2) }}\r\n      </div>\r\n      <el-button \r\n        type=\"primary\" \r\n        size=\"large\"\r\n        @click=\"checkout\"\r\n        :disabled=\"selectedCount === 0\"\r\n      >\r\n        去结算\r\n      </el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { useCartStore } from '@/stores/cart'\r\nimport { storeToRefs } from 'pinia'\r\nimport { ElMessage } from 'element-plus'\r\nimport { useRouter } from 'vue-router'\r\n\r\nconst router = useRouter()\r\nconst cartStore = useCartStore()\r\nconst { items: cartItems, selectedItems } = storeToRefs(cartStore)\r\n\r\nconst selectedCount = computed(() => selectedItems.value.size)\r\nconst selectedTotal = computed(() => \r\n  cartItems.value\r\n    .filter(item => selectedItems.value.has(item.id))\r\n    .reduce((sum, item) => sum + item.price * item.quantity, 0)\r\n)\r\n\r\nconst checkout = () => {\r\n  const order = {\r\n    orderId: `ORDER_${Date.now()}`,\r\n    items: cartItems.value.filter(item => selectedItems.value.has(item.id)),\r\n    total: selectedTotal.value,\r\n    status: 'pending',\r\n    createTime: new Date().toISOString()\r\n  }\r\n\r\n  const orders = JSON.parse(localStorage.getItem('orders') || '[]')\r\n  orders.unshift(order)\r\n  localStorage.setItem('orders', JSON.stringify(orders))\r\n\r\n  cartStore.clearSelected()\r\n  ElMessage.success('订单创建成功')\r\n  router.push('/buyer/user/orders')\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.product-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 15px;\r\n}\r\n\r\n.product-link {\r\n  color: #606266;\r\n  text-decoration: none;\r\n  &:hover {\r\n    color: #409eff;\r\n    text-decoration: underline;\r\n  }\r\n}\r\n\r\n.checkout {\r\n  margin-top: 30px;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  gap: 30px;\r\n}\r\n\r\n.total {\r\n  font-size: 20px;\r\n  color: #f56c6c;\r\n}\r\n\r\n.empty-tip {\r\n  margin-top: 50px;\r\n  padding: 40px 0;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}